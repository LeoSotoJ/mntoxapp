<!doctype html>
<html lang="en">  
<head>  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MNTox app</title>  
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>  
<body> 
<div class="container mt-5" style="width: 800px;">
	
<h1>MNTox</h1>

<p> This is a demo app for screening MS<sup>2</sup> features in LC-ESI-HRMS positive mode for potential bioactivity of the NR.AR endpoint. The CSV input file has the format: <samp>[ID]; [m/z]:[intensity] [m/z]:[intensity] ...</samp>
</p>
    <form method = "POST" enctype="multipart/form-data" action = "/">   
	<div class="input-group mb-3">
    	<input type="file" name="file" accept=".csv" class="form-control"id="fileInput">
        <input type = "submit" value="Upload" class="input-group-text" id="uploadBtn" disabled> 
	</div>   
    </form>

   <!-- Display Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="alert alert-{{ messages[0][0] }} mt-3">
          {{ messages[0][1] }}
        </div>
      {% endif %}
    {% endwith %}

    <form action="/load_example" method="get" id="loadExampleForm">
            <button type="submit" class="btn btn-secondary" id="loadExampleBtn">Load an Example File (.csv)</button>
        </form>

    <form action="/download_example" method="get" id="downloadExampleForm">
      <button type="submit" class="btn btn-secondary mt-3" id="downloadExampleBtn">Download the Example File </button>
    </form>
    
    <form action="/show_data" target="_blank">
        <input type="submit" class="btn btn-primary mt-3" value="Predict NR.AR activity"/>
    </form>
     


<footer class="footer"> 
<hr/>
Â© <a href="https://leosotoj.com">leosotoj</a> | <a href="https://github.com/LeoSotoJ?tab=repositories">GitHub</a> 
</footer>


</div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    
    
    
<script>
    // JavaScript to handle enabling/disabling the "Upload" button

    const fileInput = document.getElementById('fileInput');
    const uploadBtn = document.getElementById('uploadBtn');
    const loadExampleBtn = document.getElementById('loadExampleBtn');

    // Initially disable the "Upload" button
    uploadBtn.disabled = true;

    // Flag to track if the "Load Example File" button is clicked
    let exampleFileLoaded = false;

    // Function to check if a file is selected or the example file button is clicked
    function checkFileSelection() {
      if (fileInput.files.length > 0 || exampleFileLoaded) {
        uploadBtn.disabled = false;  // Enable upload button
      } else {
        uploadBtn.disabled = true;   // Disable upload button
      }
    }

    // Event listener for file selection
    fileInput.addEventListener('change', function() {
      checkFileSelection(); // Check file input when file is selected
    });

    // Event listener for the Load Example File button click
    loadExampleBtn.addEventListener('click', function() {
      exampleFileLoaded = true; // Mark the example file as loaded
      checkFileSelection();     // Enable the upload button
    });

    // Initially check if the "Upload" button should be enabled or disabled
    checkFileSelection();

  </script>
    
    
</body>  
</html>
